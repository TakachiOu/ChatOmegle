<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ø¯Ø±Ø¯Ø´Ø© TaKaChi - Ø¯Ø±Ø¯Ø´Ø© Ø³Ø±ÙŠØ©</title>
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
  <style>
    /* Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ */
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html { scroll-behavior: smooth; }
    :root {
      --primary-color: #3498db;
      --secondary-color: #9b59b6;
      --accent-color: #66a6ff;
      --light-bg: #ffffff;
      --dark-bg: #1e1e1e;
      --text-color: #333;
      --light-text: #fff;
      --transition: 0.3s;
    }
    body {
      font-family: 'Cairo', sans-serif;
      background: linear-gradient(135deg, #89f7fe, #66a6ff);
      color: var(--text-color);
      direction: rtl;
      overflow-x: hidden;
      transition: background var(--transition), color var(--transition);
    }
    body.dark-mode {
      background: var(--dark-bg);
      color: var(--light-text);
    }
    header {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      background: rgba(255,255,255,0.85);
      backdrop-filter: blur(5px);
      padding: 10px 20px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      z-index: 1000;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    header .logo {
      font-size: 1.8rem;
      font-weight: bold;
      color: var(--primary-color);
    }
    header nav a {
      margin-left: 15px;
      text-decoration: none;
      color: var(--text-color);
      font-weight: bold;
      transition: color var(--transition);
    }
    header nav a:hover {
      color: var(--primary-color);
    }
    .toggle-dark-mode {
      background: transparent;
      border: none;
      font-size: 1.2rem;
      cursor: pointer;
      color: var(--text-color);
      transition: color var(--transition);
    }
    body.dark-mode header,
    body.dark-mode .toggle-dark-mode,
    body.dark-mode header nav a {
      color: var(--light-text);
    }
    /* ØµÙØ­Ø© Ø§Ù„Ù‡Ø¨ÙˆØ· */
    #landingPage { padding-top: 80px; }
    .hero {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      padding: 20px;
      background: url('https://source.unsplash.com/1600x900/?technology,chat') center/cover no-repeat;
      position: relative;
    }
    .hero::before {
      content: "";
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.5);
      z-index: 1;
    }
    .hero * { position: relative; z-index: 2; }
    .brand-name {
      font-size: 3.5rem;
      font-weight: bold;
      background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
      -webkit-background-clip: text;
      color: transparent;
      text-shadow: 2px 2px 10px rgba(0,0,0,0.2);
      margin-bottom: 20px;
      animation: fadeIn 1s ease forwards;
    }
    .hero h1 {
      font-size: 2.8rem;
      margin-bottom: 20px;
      color: #fff;
      text-shadow: 2px 2px 8px rgba(0,0,0,0.3);
      animation: fadeIn 1s ease forwards;
    }
    .hero p {
      font-size: 1.5rem;
      margin-bottom: 30px;
      color: #eee;
      text-shadow: 1px 1px 5px rgba(0,0,0,0.2);
      animation: fadeIn 1s ease forwards;
    }
    .cta-btn {
      padding: 15px 30px;
      background: var(--light-bg);
      color: var(--primary-color);
      border: none;
      border-radius: 50px;
      font-size: 1.2rem;
      cursor: pointer;
      transition: transform var(--transition), background var(--transition);
      animation: fadeIn 1s ease forwards;
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    }
    .cta-btn:hover {
      transform: scale(1.05);
      background: #f0f0f0;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    section {
      padding: 60px 20px;
      max-width: 1200px;
      margin: auto;
    }
    section h2 {
      text-align: center;
      font-size: 2.5rem;
      margin-bottom: 20px;
      color: var(--primary-color);
    }
    .features {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      justify-content: center;
    }
    .feature {
      background: var(--light-bg);
      border-radius: 15px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      flex: 1 1 300px;
      max-width: 300px;
      padding: 20px;
      text-align: center;
      transition: transform var(--transition), box-shadow var(--transition);
    }
    .feature:hover {
      transform: translateY(-10px);
      box-shadow: 0 8px 20px rgba(0,0,0,0.15);
    }
    .feature i {
      font-size: 2.5rem;
      color: var(--primary-color);
      margin-bottom: 15px;
    }
    .feature h3 {
      font-size: 1.5rem;
      margin-bottom: 10px;
      color: var(--text-color);
    }
    .feature p {
      font-size: 1rem;
      color: #666;
      line-height: 1.5;
    }
    .rules {
      background: rgba(255,255,255,0.95);
      border-radius: 15px;
      padding: 30px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      max-width: 800px;
      margin: auto;
    }
    .rules ul { list-style: none; margin-top: 20px; }
    .rules li {
      margin-bottom: 10px;
      font-size: 1.1rem;
      padding-right: 25px;
      position: relative;
      line-height: 1.6;
    }
    .rules li::before {
      content: "\f00c";
      font-family: "Font Awesome 6 Free";
      font-weight: 900;
      position: absolute;
      right: 0;
      top: 0;
      color: var(--primary-color);
    }
    footer {
      text-align: center;
      padding: 20px;
      background: rgba(255,255,255,0.85);
      margin-top: 40px;
      box-shadow: 0 -2px 8px rgba(0,0,0,0.1);
    }
    /* ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© */
    #chatInterface {
      display: none;
      flex-direction: column;
      width: 100%;
      height: 100vh;
      background: linear-gradient(135deg, #fdfbfb, #ebedee);
      position: relative;
      padding-top: 60px;
      transition: background var(--transition);
    }
    body.dark-mode #chatInterface {
      background: linear-gradient(135deg, #2c3e50, #4ca1af);
    }
    .chat-header {
      background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
      color: #fff;
      padding: 15px 20px;
      font-size: 1.5rem;
      position: fixed;
      top: 60px;
      width: 100%;
      left: 0;
      box-shadow: 0 2px 8px rgba(0,0,0,0.2);
      z-index: 900;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    .chat-header button.disconnect {
      background: #e74c3c;
      border: none;
      color: #fff;
      cursor: pointer;
      font-size: 1rem;
      padding: 8px 12px;
      border-radius: 5px;
      transition: background var(--transition), transform 0.3s;
    }
    .chat-header button.disconnect:hover {
      background: #c0392b;
      transform: scale(1.05);
    }
    .chat-messages {
      flex: 1;
      padding: 100px 20px 80px 20px;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    .chat-message {
      max-width: 80%;
      padding: 12px 18px;
      border-radius: 20px;
      position: relative;
      background: var(--primary-color);
      color: #fff;
      align-self: flex-end;
      animation: messageIn 0.5s ease forwards;
      box-shadow: 0 4px 8px rgba(0,0,0,0.15);
      word-break: break-word;
      font-size: 1rem;
    }
    @keyframes messageIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .chat-message.received {
      background: var(--light-bg);
      color: var(--text-color);
      align-self: flex-start;
      border: 1px solid #ddd;
    }
    .chat-message .timestamp {
      font-size: 0.7rem;
      color: rgba(255,255,255,0.8);
      position: absolute;
      bottom: -18px;
      right: 12px;
    }
    .chat-message.received .timestamp {
      color: #666;
      right: auto;
      left: 12px;
    }
    .chat-input-container {
      position: fixed;
      bottom: 0;
      width: 100%;
      background: var(--light-bg);
      padding: 10px 20px;
      border-top: 1px solid #ddd;
      display: flex;
      align-items: center;
      transition: background var(--transition);
      z-index: 1000;
    }
    body.dark-mode .chat-input-container {
      background: #2e2e2e;
      border-top: 1px solid #444;
    }
    .chat-input-container input {
      flex: 1;
      padding: 10px 15px;
      border: 1px solid #ccc;
      border-radius: 25px;
      font-size: 1rem;
      transition: background var(--transition), color var(--transition);
      outline: none;
    }
    body.dark-mode .chat-input-container input {
      background: #444;
      color: var(--light-text);
      border: 1px solid #555;
    }
    .chat-input-container button.send {
      padding: 10px 15px;
      margin-left: 10px;
      border: none;
      background: var(--primary-color);
      color: #fff;
      border-radius: 25px;
      cursor: pointer;
      font-size: 1rem;
      transition: background var(--transition);
      box-shadow: 0 2px 4px rgba(0,0,0,0.2);
    }
    .chat-input-container button.send:hover {
      background: var(--secondary-color);
    }
    /* Ø²Ø± Ø§Ù„Ø¥ÙŠÙ…ÙˆØ¬ÙŠ ÙƒØ¨ÙŠØ± ÙˆÙˆØ§Ø¶Ø­ */
    .chat-input-container button.emoji-btn {
      background: transparent;
      border: none;
      font-size: 1.8rem;
      cursor: pointer;
      margin-right: 10px;
      transition: transform 0.2s;
    }
    .chat-input-container button.emoji-btn:hover {
      transform: scale(1.2);
    }
    /* Ù„ÙˆØ­Ø© Ø§Ù„Ø¥ÙŠÙ…ÙˆØ¬ÙŠ */
    #chatEmojiPicker {
      display: none;
      position: absolute;
      bottom: 60px;
      left: 20px;
      right: 20px;
      background: var(--light-bg);
      padding: 10px;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      max-height: 300px;
      overflow-y: auto;
      z-index: 1100;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(40px, 1fr));
      gap: 5px;
    }
    #chatEmojiPicker .emoji {
      cursor: pointer;
      font-size: 1.6rem;
      padding: 5px;
      transition: transform 0.2s;
      text-align: center;
    }
    #chatEmojiPicker .emoji:hover {
      transform: scale(1.2);
    }
    /* Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ…Ø±ÙŠØ± Ø§Ù„Ù…Ø®ØµØµ */
    ::-webkit-scrollbar { width: 8px; }
    ::-webkit-scrollbar-track { background: #f1f1f1; border-radius: 10px; }
    ::-webkit-scrollbar-thumb { background: var(--primary-color); border-radius: 10px; }
    @media(max-width:768px){
      .brand-name { font-size: 2.8rem; }
      .hero h1 { font-size: 2.2rem; }
      .hero p { font-size: 1.2rem; }
      section h2 { font-size: 2rem; }
      .feature { max-width: 90%; }
      .chat-message { font-size: 0.9rem; }
    }
  </style>
</head>
<body>
  <!-- ØµÙØ­Ø© Ø§Ù„Ù‡Ø¨ÙˆØ· -->
  <div id="landingPage">
    <header>
      <div class="logo">Ø¯Ø±Ø¯Ø´Ø© Ø£Ù…Ø©</div>
      <nav>
        <a href="#home">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
        <a href="#features">Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª</a>
        <a href="#rules">Ø§Ù„Ù‚ÙˆØ§Ù†ÙŠÙ†</a>
        <a href="#chat">Ø§Ù„Ø¯Ø±Ø¯Ø´Ø©</a>
      </nav>
      <button class="toggle-dark-mode" onclick="toggleDarkMode()">ğŸŒ™</button>
    </header>
    <section class="hero" id="home">
      <div class="brand-name">TaKaChi</div>
      <h1>Ø¯Ø±Ø¯Ø´Ø© Ø¢Ù…Ù†Ø© ÙˆØ³Ø±ÙŠØ© Ø¨Ù„Ø§ Ø­Ø¯ÙˆØ¯</h1>
      <p>Ø§Ø³ØªÙ…ØªØ¹ Ø¨ØªØ¬Ø±Ø¨Ø© Ø¯Ø±Ø¯Ø´Ø© Ø®Ø§ØµØ© ÙˆÙ…Ø´ÙØ±Ø© Ø¯ÙˆÙ† Ø§Ù„Ø­Ø§Ø¬Ø© Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„. ØªÙˆØ§ØµÙ„ Ø¨Ø­Ø±ÙŠØ© ÙˆØ®ØµÙˆØµÙŠØ© ØªØ§Ù…Ø©.</p>
      <button class="cta-btn" onclick="startChat()">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¯Ø±Ø¯Ø´Ø©</button>
    </section>
    <section id="features">
      <h2>Ù…Ù…ÙŠØ²Ø§Øª Ø§Ù„Ù…ÙˆÙ‚Ø¹</h2>
      <div class="features">
        <div class="feature">
          <i class="fas fa-user-secret"></i>
          <h3>Ø®ØµÙˆØµÙŠØ© ØªØ§Ù…Ø©</h3>
          <p>Ù„Ù† Ù†Ù‚ÙˆÙ… Ø¨ØªØ®Ø²ÙŠÙ† Ù…Ø­Ø§Ø¯Ø«Ø§ØªÙƒ Ø£Ùˆ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ Ø§Ù„Ø´Ø®ØµÙŠØ©ØŒ Ù…Ù…Ø§ ÙŠØ¶Ù…Ù† Ø³Ø±ÙŠØ© Ù…Ø¹Ù„ÙˆÙ…Ø§ØªÙƒ Ø¯Ø§Ø¦Ù…Ø§Ù‹.</p>
        </div>
        <div class="feature">
          <i class="fas fa-lock"></i>
          <h3>ØªØ´ÙÙŠØ± Ø¢Ù…Ù†</h3>
          <p>ØªÙ‚Ù†ÙŠØ§Øª ØªØ´ÙÙŠØ± Ù…ØªØ·ÙˆØ±Ø© ØªØ­Ù…ÙŠ Ù…Ø­Ø§Ø¯Ø«Ø§ØªÙƒ ÙˆØªÙ…Ù†Ø¹ Ø£ÙŠ ØªØ³Ø±Ø¨ Ù„Ù„Ø¨ÙŠØ§Ù†Ø§Øª.</p>
        </div>
        <div class="feature">
          <i class="fas fa-user-check"></i>
          <h3>Ø¨Ù„Ø§ ØªØ³Ø¬ÙŠÙ„</h3>
          <p>Ø§Ù†Ø¶Ù… Ù…Ø¨Ø§Ø´Ø±Ø© ÙˆØ§Ø¨Ø¯Ø£ Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© Ø¯ÙˆÙ† Ø§Ù„Ø­Ø§Ø¬Ø© Ø¥Ù„Ù‰ Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨.</p>
        </div>
        <div class="feature">
          <i class="fas fa-comments"></i>
          <h3>Ù…Ø¬ØªÙ…Ø¹ Ø­Ø±</h3>
          <p>ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø£Ø´Ø®Ø§Øµ Ù…Ù† Ù…Ø®ØªÙ„Ù Ø§Ù„Ø®Ù„ÙÙŠØ§Øª ÙÙŠ Ø¨ÙŠØ¦Ø© Ù…ÙØªÙˆØ­Ø© ÙˆØ¢Ù…Ù†Ø© Ù„Ù„ØªØ¹Ø¨ÙŠØ± Ø¹Ù† Ø¢Ø±Ø§Ø¦Ùƒ.</p>
        </div>
      </div>
    </section>
    <section id="rules">
      <h2>Ù‚ÙˆØ§Ù†ÙŠÙ† Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…</h2>
      <div class="rules">
        <ul>
          <li>Ø§Ø­ØªØ±Ø§Ù… Ø§Ù„Ø¢Ø®Ø±ÙŠÙ† ÙˆØªØ¬Ù†Ø¨ Ø§Ù„Ø¥Ù‡Ø§Ù†Ø§Øª Ø§Ù„Ø´Ø®ØµÙŠØ©.</li>
          <li>Ù…Ù†Ø¹ Ù†Ø´Ø± Ù…Ø­ØªÙˆÙ‰ Ù…Ø®Ø§Ù„Ù Ù„Ù„Ù‚Ø§Ù†ÙˆÙ† Ø£Ùˆ Ù„Ù„Ø£Ø®Ù„Ø§Ù‚ Ø§Ù„Ø¹Ø§Ù…Ø©.</li>
          <li>Ø§Ù„Ø§Ù…ØªÙ†Ø§Ø¹ Ø¹Ù† Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…Ù†ØµØ© Ù„Ù†Ø´Ø± Ø§Ù„ÙƒØ±Ø§Ù‡ÙŠØ© Ø£Ùˆ Ø§Ù„ØªØ­Ø±ÙŠØ¶ Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ù†Ù.</li>
          <li>Ø¹Ø¯Ù… Ù…Ø´Ø§Ø±ÙƒØ© Ù…Ø­ØªÙˆÙ‰ Ù…Ø­Ù…ÙŠ Ø¨Ø­Ù‚ÙˆÙ‚ Ø§Ù„Ø·Ø¨Ø¹ ÙˆØ§Ù„Ù†Ø´Ø± Ø¯ÙˆÙ† Ø¥Ø°Ù†.</li>
          <li>Ø§Ù„Ø­ÙØ§Ø¸ Ø¹Ù„Ù‰ Ø³Ø±ÙŠØ© Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø§Øª ÙˆØ¹Ø¯Ù… Ù†Ø´Ø±Ù‡Ø§ Ø®Ø§Ø±Ø¬ Ø§Ù„Ù…Ù†ØµØ©.</li>
          <li>Ø§Ù„Ù…Ù†ØµØ© Ù„Ø§ ØªØªØ·Ù„Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ù„Ø¶Ù…Ø§Ù† Ø³Ù‡ÙˆÙ„Ø© Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙˆØ®ØµÙˆØµÙŠØ© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù….</li>
        </ul>
      </div>
    </section>
    <section id="chat">
      <h2>Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¯Ø±Ø¯Ø´Ø©</h2>
      <div class="chat-section" style="text-align: center; animation: fadeIn 1s ease forwards;">
        <p style="font-size: 1.2rem;">Ø§Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø²Ø± "Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¯Ø±Ø¯Ø´Ø©" Ù„ØªØ­ÙˆÙŠÙ„ Ø§Ù„ØµÙØ­Ø© Ø¥Ù„Ù‰ ÙˆØ§Ø¬Ù‡Ø© Ø¯Ø±Ø¯Ø´Ø© Ø®Ø§ØµØ©.</p>
      </div>
    </section>
    <footer>
      <p>&copy; 2025 Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© - Ø¯Ø±Ø¯Ø´Ø© Ø£Ù…Ø©</p>
    </footer>
  </div>

  <!-- ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© -->
  <div id="chatInterface">
    <div class="chat-header">
      <span>ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© Ø§Ù„Ø®Ø§ØµØ©</span>
      <button class="disconnect" id="disconnectBtn" title="Ù‚Ø·Ø¹ Ø§Ù„Ø§ØªØµØ§Ù„ ÙˆØ§Ù„ØªØ¨Ø¯ÙŠÙ„">
        <i class="fas fa-power-off"></i> Ù‚Ø·Ø¹ Ø§Ù„Ø§ØªØµØ§Ù„
      </button>
    </div>
    <div class="chat-messages" id="chatMessages"></div>
    <div class="chat-input-container">
      <button class="emoji-btn" id="chatEmojiBtn" title="Ø¥Ø¶Ø§ÙØ© Ø¥ÙŠÙ…ÙˆØ¬ÙŠ">ğŸ˜Š</button>
      <input type="text" id="chatInput" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„Ø©...">
      <button class="send" id="chatSendBtn">Ø§ØªØµØ§Ù„</button>
      <div id="chatEmojiPicker"></div>
    </div>
  </div>

  <script src="/socket.io/socket.io.js"></script>
  <script>
    const socket = io();
    let chatActive = false;

    // Ø¨Ø¯Ø¡ Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© Ù…Ù† ØµÙØ­Ø© Ø§Ù„Ù‡Ø¨ÙˆØ·
    function startChat() {
      document.getElementById("landingPage").style.display = "none";
      document.getElementById("chatInterface").style.display = "flex";
      document.getElementById("chatInput").disabled = false;
      document.getElementById("chatSendBtn").textContent = "Ø§ØªØµØ§Ù„";
      socket.emit("joinChat");
    }

    // Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±
    socket.on("waiting", function(message) {
      const sysMsg = document.createElement("div");
      sysMsg.classList.add("chat-message", "received");
      sysMsg.style.fontStyle = "italic";
      sysMsg.textContent = message;
      document.getElementById("chatMessages").appendChild(sysMsg);
      document.getElementById("chatMessages").scrollTop = document.getElementById("chatMessages").scrollHeight;
      chatActive = false;
      document.getElementById("chatSendBtn").textContent = "Ø§ØªØµØ§Ù„";
    });

    // Ø¹Ù†Ø¯ Ø¨Ø¯Ø¡ Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© (ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø´Ø±ÙŠÙƒ)
    socket.on("chat started", function(data) {
      const sysMsg = document.createElement("div");
      sysMsg.classList.add("chat-message", "received");
      sysMsg.style.fontStyle = "italic";
      sysMsg.textContent = "ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø´Ø±ÙŠÙƒ Ù„Ù„Ø¯Ø±Ø¯Ø´Ø©. ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¢Ù† Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©.";
      document.getElementById("chatMessages").appendChild(sysMsg);
      document.getElementById("chatMessages").scrollTop = document.getElementById("chatMessages").scrollHeight;
      chatActive = true;
      document.getElementById("chatInput").disabled = false;
      document.getElementById("chatSendBtn").textContent = "Ø¥Ø±Ø³Ø§Ù„";
    });

    // Ø¹Ù†Ø¯ Ø®Ø±ÙˆØ¬ Ø§Ù„Ø´Ø±ÙŠÙƒ Ù…Ù† Ø§Ù„Ø¯Ø±Ø¯Ø´Ø©
    socket.on("partner left", function(message) {
      const sysMsg = document.createElement("div");
      sysMsg.classList.add("chat-message", "received");
      sysMsg.style.fontStyle = "italic";
      sysMsg.textContent = message;
      document.getElementById("chatMessages").appendChild(sysMsg);
      document.getElementById("chatMessages").scrollTop = document.getElementById("chatMessages").scrollHeight;
      chatActive = false;
      document.getElementById("chatInput").disabled = false;
      document.getElementById("chatSendBtn").textContent = "Ø§ØªØµØ§Ù„";
    });

    // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø²Ø± Ø§Ù„Ø¥Ø±Ø³Ø§Ù„/Ø§ØªØµØ§Ù„
    document.getElementById("chatSendBtn").addEventListener("click", function() {
      if (!chatActive) {
        document.getElementById("chatMessages").innerHTML = "";
        socket.emit("joinChat");
      } else {
        sendChatMessage();
      }
    });

    // Ø¯Ø¹Ù… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø¹Ø¨Ø± Ù…ÙØªØ§Ø­ Enter
    document.getElementById("chatInput").addEventListener("keypress", function(event) {
      if (event.key === "Enter") {
        event.preventDefault();
        if (chatActive) {
          sendChatMessage();
        }
      }
    });

    // Ø¯Ø§Ù„Ø© Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø©
    function sendChatMessage() {
      const chatInput = document.getElementById("chatInput");
      const message = chatInput.value.trim();
      if (message !== "") {
        let msgDiv = document.createElement("div");
        msgDiv.classList.add("chat-message");
        msgDiv.textContent = message;
        let timeSpan = document.createElement("span");
        timeSpan.classList.add("timestamp");
        let now = new Date();
        let hours = now.getHours();
        let minutes = now.getMinutes();
        if (minutes < 10) minutes = "0" + minutes;
        timeSpan.textContent = hours + ":" + minutes;
        msgDiv.appendChild(timeSpan);
        document.getElementById("chatMessages").appendChild(msgDiv);
        document.getElementById("chatMessages").scrollTop = document.getElementById("chatMessages").scrollHeight;
        socket.emit("chat message", message);
        chatInput.value = "";
      }
    }

    // Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ù…Ù† Ø§Ù„Ø·Ø±Ù Ø§Ù„Ø¢Ø®Ø±
    socket.on("chat message", function(msg) {
      let msgDiv = document.createElement("div");
      msgDiv.classList.add("chat-message", "received");
      msgDiv.textContent = msg;
      let timeSpan = document.createElement("span");
      timeSpan.classList.add("timestamp");
      let now = new Date();
      let hours = now.getHours();
      let minutes = now.getMinutes();
      if (minutes < 10) minutes = "0" + minutes;
      timeSpan.textContent = hours + ":" + minutes;
      msgDiv.appendChild(timeSpan);
      document.getElementById("chatMessages").appendChild(msgDiv);
      document.getElementById("chatMessages").scrollTop = document.getElementById("chatMessages").scrollHeight;
    });

    // Ø²Ø± Ù‚Ø·Ø¹ Ø§Ù„Ø§ØªØµØ§Ù„: ÙŠÙØµÙ„ Ø§Ù„Ø·Ø±ÙÙŠÙ† ÙˆÙŠØ¹ÙŠØ¯Ù‡Ù…Ø§ Ù„Ù„Ø§Ù†ØªØ¸Ø§Ø±
    document.getElementById("disconnectBtn").addEventListener("click", function() {
      if (confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ù‚Ø·Ø¹ Ø§Ù„Ø§ØªØµØ§Ù„ ÙˆØ§Ù„ØªØ¨Ø¯ÙŠÙ„ Ù„Ø´Ø®Øµ Ø¢Ø®Ø±ØŸ")) {
        socket.emit("leaveChat");
        document.getElementById("chatMessages").innerHTML = "";
        chatActive = false;
        document.getElementById("chatInput").value = "";
        document.getElementById("chatSendBtn").textContent = "Ø§ØªØµØ§Ù„";
        setTimeout(function() {
          socket.emit("joinChat");
        }, 500);
      }
    });

    // Ø²Ø± Ø¹Ø±Ø¶/Ø¥Ø®ÙØ§Ø¡ Ù„ÙˆØ­Ø© Ø§Ù„Ø¥ÙŠÙ…ÙˆØ¬ÙŠ
    const chatEmojiBtn = document.getElementById("chatEmojiBtn");
    const chatEmojiPicker = document.getElementById("chatEmojiPicker");

    chatEmojiBtn.addEventListener("click", function() {
      if (chatEmojiPicker.style.display === "none" || chatEmojiPicker.style.display === "") {
        chatEmojiPicker.style.display = "grid";
      } else {
        chatEmojiPicker.style.display = "none";
      }
    });

    // Ù‚Ø§Ø¦Ù…Ø© ÙˆØ§Ø³Ø¹Ø© Ù…Ù† Ø§Ù„Ø¥ÙŠÙ…ÙˆØ¬ÙŠ
    const emojiList = [
      "ğŸ˜€","ğŸ˜ƒ","ğŸ˜„","ğŸ˜","ğŸ˜†","ğŸ˜…","ğŸ˜‚","ğŸ¤£","ğŸ˜Š","ğŸ˜‡",
      "ğŸ™‚","ğŸ™ƒ","ğŸ˜‰","ğŸ˜Œ","ğŸ˜","ğŸ¥°","ğŸ˜˜","ğŸ˜—","ğŸ˜™","ğŸ˜š",
      "ğŸ˜‹","ğŸ˜›","ğŸ˜","ğŸ˜œ","ğŸ¤ª","ğŸ¤¨","ğŸ§","ğŸ¤“","ğŸ˜","ğŸ¤©",
      "ğŸ¥³","ğŸ˜","ğŸ˜’","ğŸ˜","ğŸ˜”","ğŸ˜Ÿ","ğŸ˜•","ğŸ™","â˜¹ï¸","ğŸ˜£",
      "ğŸ˜–","ğŸ˜«","ğŸ˜©","ğŸ¥º","ğŸ˜¢","ğŸ˜­","ğŸ˜¤","ğŸ˜ ","ğŸ˜¡","ğŸ¤¬",
      "ğŸ¤¯","ğŸ˜³","ğŸ¥µ","ğŸ¥¶","ğŸ˜±","ğŸ˜¨","ğŸ˜°","ğŸ˜¥","ğŸ˜“","ğŸ¤—",
      "ğŸ¤”","ğŸ¤­","ğŸ¤«","ğŸ¤¥","ğŸ˜¶","ğŸ˜","ğŸ˜‘","ğŸ˜¬","ğŸ™„","ğŸ˜¯",
      "ğŸ˜¦","ğŸ˜§","ğŸ˜®","ğŸ˜²","ğŸ¥±","ğŸ˜´","ğŸ¤¤","ğŸ˜ª","ğŸ˜µ","ğŸ¤",
      "ğŸ¥´","ğŸ¤¢","ğŸ¤®","ğŸ¤§","ğŸ˜·","ğŸ¤’","ğŸ¤•","ğŸ¤‘","ğŸ˜ˆ","ğŸ‘¿",
      "ğŸ‘¹","ğŸ‘º","ğŸ¤¡","ğŸ’©","ğŸ‘»","ğŸ’€","â˜ ï¸","ğŸ‘½","ğŸ‘¾","ğŸ¤–",
      "ğŸƒ","ğŸŒ","ğŸŒ","ğŸŒš","ğŸŒ•","ğŸŒ–","ğŸŒ—","ğŸŒ˜","ğŸŒ‘","ğŸŒ’",
      "ğŸŒ“","ğŸŒ”","ğŸŒ™","ğŸŒ","ğŸŒ","ğŸŒ","ğŸ’«","â­","ğŸŒŸ","âœ¨"
    ];
    
    emojiList.forEach(emoji => {
      let span = document.createElement("span");
      span.classList.add("emoji");
      span.textContent = emoji;
      span.addEventListener("click", function() {
        document.getElementById("chatInput").value += emoji;
        chatEmojiPicker.style.display = "none";
        document.getElementById("chatInput").focus();
      });
      chatEmojiPicker.appendChild(span);
    });

    // ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ
    function toggleDarkMode() {
      document.body.classList.toggle('dark-mode');
    }
  </script>
</body>
</html>
